---
import i18next, { t } from "i18next";

const i18 = i18next.getDataByLanguage(i18next.language) as any;
const homeLabels = i18["translation"]["home"];
const optionsMenu = [
  {
    href: "#about",
    title: homeLabels.about["title"],
  },
  {
    href: "#experience",
    title: homeLabels.experience["title"],
  },
  {
    href: "#education",
    title: homeLabels.education["title"],
  },
  {
    href: "#projects",
    title: homeLabels.projects["title"],
  },
  {
    href: "#skills",
    title: homeLabels.skills["title"],
  },
  {
    href: "#tools",
    title: homeLabels.tools["title"],
  },
];

let open = true;
let currentColor = "#fff";
---

<header class="lg:max-w-7xl w-full md:fixed z-20 md:px-5">
  <nav
    class="grid grid-cols-1 md:grid-cols-3"
    aria-label="global"
    x-data="{ open: false }"
  >
    <div class="col-span-1 flex flex-row items-start justify-between">
      <div>
        <button
          id="toggleLanguaje"
          class="bg-accent-300 hover:bg-accent-600 dark:bg-accent-900 bg-background-tertiary rounded-md border border-border p-1.5 shadow-md transition-all md:mr-5"
        >
          <span class="sr-only">Dark Theme</span>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="32"
            height="32"
            viewBox="0 0 512 512"
            class="h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all text-black hover:text-white dark:hidden dark:-rotate-90 dark:scale-0"
          >
            <path
              fill="#000"
              d="M57.7 193l9.4 16.4c8.3 14.5 21.9 25.2 38 29.8L163 255.7c17.2 4.9 29 20.6 29 38.5v39.9c0 11 6.2 21 16 25.9s16 14.9 16 25.9v39c0 15.6 14.9 26.9 29.9 22.6c16.1-4.6 28.6-17.5 32.7-33.8l2.8-11.2c4.2-16.9 15.2-31.4 30.3-40l8.1-4.6c15-8.5 24.2-24.5 24.2-41.7v-8.3c0-12.7-5.1-24.9-14.1-33.9l-3.9-3.9c-9-9-21.2-14.1-33.9-14.1H257c-11.1 0-22.1-2.9-31.8-8.4l-34.5-19.7c-4.3-2.5-7.6-6.5-9.2-11.2c-3.2-9.6 1.1-20 10.2-24.5l5.9-3c6.6-3.3 14.3-3.9 21.3-1.5l23.2 7.7c8.2 2.7 17.2-.4 21.9-7.5c4.7-7 4.2-16.3-1.2-22.8l-13.6-16.3c-10-12-9.9-29.5 .3-41.3l15.7-18.3c8.8-10.3 10.2-25 3.5-36.7l-2.4-4.2c-3.5-.2-6.9-.3-10.4-.3C163.1 48 84.4 108.9 57.7 193zM464 256c0-36.8-9.6-71.4-26.4-101.5L412 164.8c-15.7 6.3-23.8 23.8-18.5 39.8l16.9 50.7c3.5 10.4 12 18.3 22.6 20.9l29.1 7.3c1.2-9 1.8-18.2 1.8-27.5zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256z"
            ></path></svg
          >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="32"
            height="32"
            viewBox="0 0 512 512"
            class="hidden h-[1.2rem] w-[1.2rem] rotate-90 scale-0 text-black transition-all hover:text-white dark:block dark:rotate-0 dark:scale-100"
            ><path
              fill={currentColor}
              d="M57.7 193l9.4 16.4c8.3 14.5 21.9 25.2 38 29.8L163 255.7c17.2 4.9 29 20.6 29 38.5v39.9c0 11 6.2 21 16 25.9s16 14.9 16 25.9v39c0 15.6 14.9 26.9 29.9 22.6c16.1-4.6 28.6-17.5 32.7-33.8l2.8-11.2c4.2-16.9 15.2-31.4 30.3-40l8.1-4.6c15-8.5 24.2-24.5 24.2-41.7v-8.3c0-12.7-5.1-24.9-14.1-33.9l-3.9-3.9c-9-9-21.2-14.1-33.9-14.1H257c-11.1 0-22.1-2.9-31.8-8.4l-34.5-19.7c-4.3-2.5-7.6-6.5-9.2-11.2c-3.2-9.6 1.1-20 10.2-24.5l5.9-3c6.6-3.3 14.3-3.9 21.3-1.5l23.2 7.7c8.2 2.7 17.2-.4 21.9-7.5c4.7-7 4.2-16.3-1.2-22.8l-13.6-16.3c-10-12-9.9-29.5 .3-41.3l15.7-18.3c8.8-10.3 10.2-25 3.5-36.7l-2.4-4.2c-3.5-.2-6.9-.3-10.4-.3C163.1 48 84.4 108.9 57.7 193zM464 256c0-36.8-9.6-71.4-26.4-101.5L412 164.8c-15.7 6.3-23.8 23.8-18.5 39.8l16.9 50.7c3.5 10.4 12 18.3 22.6 20.9l29.1 7.3c1.2-9 1.8-18.2 1.8-27.5zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256z"
            ></path></svg
          >
        </button>
        <button
          id="toggleDarkMode"
          class="bg-accent-300 hover:bg-accent-600 dark:bg-accent-900 bg-background-tertiary rounded-md border border-border p-1.5 shadow-md transition-all md:mr-5"
        >
          <span class="sr-only">Dark Theme</span>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="32"
            height="32"
            viewBox="0 0 24 24"
            class="h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all text-black hover:text-white dark:hidden dark:-rotate-90 dark:scale-0"
            ><path
              fill="#000"
              d="M12 15q1.25 0 2.125-.875T15 12q0-1.25-.875-2.125T12 9q-1.25 0-2.125.875T9 12q0 1.25.875 2.125T12 15m0 1q-1.671 0-2.836-1.164T8 12q0-1.671 1.164-2.836T12 8q1.671 0 2.836 1.164T16 12q0 1.671-1.164 2.836T12 16m-7-3.5H1.5v-1H5zm17.5 0H19v-1h3.5zM11.5 5V1.5h1V5zm0 17.5V19h1v3.5zM6.746 7.404l-2.16-2.098l.695-.744l2.111 2.134zM18.72 19.438l-2.117-2.14l.652-.702l2.16 2.098zM16.596 6.746l2.098-2.16l.744.695l-2.134 2.111zM4.562 18.72l2.14-2.117l.663.652l-2.078 2.179zM12 12"
            ></path></svg
          >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="32"
            height="32"
            viewBox="0 0 24 24"
            class="hidden h-[1.2rem] w-[1.2rem] rotate-90 scale-0 text-black hover:text-white transition-all dark:block dark:rotate-0 dark:scale-100"
            ><path
              fill={currentColor}
              d="M12.058 20q-3.334 0-5.667-2.333Q4.058 15.333 4.058 12q0-3.038 1.98-5.27Q8.02 4.5 10.942 4.097q.081 0 .159.006t.153.017q-.506.706-.801 1.57q-.295.865-.295 1.811q0 2.667 1.866 4.533q1.867 1.867 4.534 1.867q.952 0 1.813-.295q.862-.295 1.548-.801q.012.075.018.153q.005.078.005.158q-.384 2.923-2.615 4.904T12.057 20"
            ></path></svg
          >
        </button>

        <button
          id="toggleMobileMenu"
          class="hover:bg-accent-300 dark:bg-accent-900 bg-background-tertiary top-5 rounded-md border border-border p-1.5 shadow-md transition-all dark:shadow-black/50 md:hidden"
          x-on:click={(open = !open)}
        >
          <span class="sr-only">Menu</span>
          <svg
            width="1em"
            height="1em"
            viewBox="0 0 50 50"
            x-show={!open}
            class="h-[1.2rem] w-[1.2rem] transition-all dark:text-white"
            data-icon="menu"
          >
            <symbol id="ai:local:menu"
              ><path
                fill={currentColor}
                d="M3 9a1 1 0 1 0 0 2h44a1 1 0 1 0 0-2H3zm0 15a1 1 0 1 0 0 2h44a1 1 0 1 0 0-2H3zm0 15a1 1 0 1 0 0 2h44a1 1 0 1 0 0-2H3z"
              ></path></symbol
            ><use xlink:href="#ai:local:menu"></use>
          </svg>
          <svg
            width="1em"
            height="1em"
            viewBox="0 0 50 50"
            x-show={open}
            class="h-[1.2rem] w-[1.2rem] transition-all dark:text-white"
            data-icon="close"
            style="display: none;"
          >
            <symbol id="ai:local:close"
              ><path
                fill={currentColor}
                d="M7.719 6.281 6.28 7.72 23.563 25 6.28 42.281l1.44 1.439L25 26.438l17.281 17.28 1.438-1.437L26.438 25l17.28-17.281-1.437-1.438L25 23.563Z"
              ></path></symbol
            ><use xlink:href="#ai:local:close"></use>
          </svg>
        </button>
      </div>
    </div>
    <nav
      id="mobile_menu"
      x-collapse=""
      x-show="open"
      x-transition=""
      class="bg-background-tertiary text-secondary-foreground mt-1.5 p-5 flex flex-grow flex-col items-center justify-between gap-4 rounded-xl md:hidden shadow-xl dark:shadow-black/50"
      style="display: none;"
    >
      {
        optionsMenu.map((option) => (
          <a
            href={option.href}
            class="hover:text-accent-300 flex-none text-[1.05rem] font-medium"
            aria-label="Tools"
          >
            {option.title}
          </a>
        ))
      }
    </nav>
    <div
      class="bg-white dark:bg-black text-black dark:text-white z-10 col-span-2 mb-5 hidden flex-row justify-between rounded-2xl border border-transparent p-2 text-secondary-foreground shadow-xl dark:shadow-black/50 md:flex"
    >
      {
        optionsMenu.map((option) => (
          <a
            href={option.href}
            class="hover:shadow-md hover:bg-accent-200 dark:hover:bg-accent-900 p-2 rounded-2xl border border-transparent flex-none text-[1.05rem] font-medium"
            aria-label="Nav Menu Item"
          >
            {option.title}
          </a>
        ))
      }
    </div>
  </nav>
</header>
<script is:inline>
  let isDark = false;
  document.getElementById("toggleDarkMode")?.addEventListener("click", () => {
    isDark = !isDark;
    if (!isDark) {
      document.documentElement.classList.remove("dark");
    } else {
      document.documentElement.classList.add("dark");
    }
  });
  let isSpanish = location.href.split("/").reverse()[0].split("#")[0] == "es";
  document.getElementById("toggleLanguaje")?.addEventListener("click", () => {
    isSpanish = !isSpanish;
    if (isSpanish) {
      location.pathname = "erich/es";
    } else {
      location.pathname = "erich/";
    }
  });
</script>
